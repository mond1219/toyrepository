# 디자인 패턴
- 프로그램을 설계할 때 발생했떤 문제점들을 객체 간의 상호 관계 등을 이용하여 해결할 수 있도록 하나의 `규약` 형태로 만들어 놓은 것

## 1. 싱글톤 패턴
- 하나의 클래스에 오직 하나의 인스턴스만 가지는 패턴, 보통 데이터베이스 연결 모듈에 많이 사용
- 장점 : 하나의 인스턴스를 만들어 놓고 해당 인스턴스를 다른 모듈들이 공유하며 사용하기 때문에 인스턴스를 생성할 때 드는 비용이 줄어드는 장점
- 단점 : 의존성이 높아진다.

### 💚예시
``` python
# DB 연결 모듈 
class Maria(object)
  def getConn():
    conn = mariadb.connect(
            user = 'userName',
            password = 'password',
            host = 'hostName',
            port = 3030,
            database = 'dbName'
        )
    return conn

# Database 모듈 
class Database:
  def getAll(self, sql, params):
    conn = Maria.getConn()
    cursor = conn.cursor()
    cursor.excute(sql, params)
    result = cursor.fetchall()
    cursor.close()
    return result
```
  데이터베이스 연결에 관한 인스턴스를 정의하고 다른 모듈에서 해당 인스턴스를 기반으로 쿼리를 보내는 형식으로 쓰인다.

### 싱글톤 패턴의 단점
- TDD(Test Driven Development)에는 걸림돌
  - TDD는 단위 테스트를 주로 하는데, 단위 테스트는 테스트가 서로 독립적이어야 하고, 어떤 순서로든 실행할 수있어야한다.
  - 싱글톤 패턴은 미리 생성된 하나의 인스턴스를 기반으로 구현하는 패턴이므로 각 테스트마다 `독립적인` 인스턴스를만들기 어렵다.
- 의존성 주입
  - 싱글톤은 사용하기가 쉽고 굉장히 실용적이지만 모듈 간의 결합을 강하게 만든다.
  - 의존성 주입(DI, Dependency Injection)을 통해 모듈 간의 결합을 조금 더 느슨하게 만들어서 해결할 수 있다.
  - 메인 모듈이 `직접` 다른 하위 모듈에 대한 의종성응ㄹ 주기보다는 중간에 의존성 주입자(dependency Injector)가 이 부분을 가로채 메인 모듈이 `간접`적으로 의존성을 주입하는 방식
  - 이를 `디커플링이 된다`라고 말한다.
  - 위 예시에서 보이다 싶이 Maria모듈을 main모듈이라고 한다면 비즈니스 로직을 수행하는 다른 곳에서 바로 호출하여 사용하는 것이 아니라, Database class == 의존성 주입자를 통하여
    다른 비즈니스 로직들이 DB 접근할 수 있도록 하였다.
  - 장점 
    - 모듈을 쉽게 교체할 수 있어 테스트가 쉽고, 마이그레이션도 수월
    - 구현할 때 추상화 레이어를 넣고 이를 기바으로 구현체를 넣어주기 때문에 의존성 방향이 일관되고, 모듈 간의 관계들이 명확해 진다.
  - 단점
    - 모듈들이 더운덕 분리되므로 클래스 수가 늘어가 복잡성이 증가, 런타임 패널티가 생기도 한다.
  - 의존성 주입 원칙
    - 상위 모듈은 하위 모듈에서 어떠한 것도 가져오지 않아야한다. 둘 다 추상화에 의존해야 하며, 이때 추상화는 세부 사항에 의존하지 말아야한다. 
    
    
    
  
  
